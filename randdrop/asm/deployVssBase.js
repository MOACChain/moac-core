/*
 * Example to deploy the VSS base contract for RandDrop AppChain.
 * The smart contract VssBase.sol is precompiled to prevent any compiler issues.
 * 
 * Solidity compiler v0.4.24 is suggested to use for compiling VssBase.sol.
 * 
 * Require:
 * 1. A valid account keystore with password to deploy the Contract on the MOAC BaseChain;
 * 2. A running VNODE can connect and send Transaction to, need turn on personal in rpc api;
 *    --rpcapi "chain3,mc,net,vnode,personal"
 * 
 * Usage:
 *   node deployVssBase.js
 * 
 * For AppChain related info, please check online documents:
 * English:
 * https://moac-docs.readthedocs.io/en/latest
 * 中文：
 * https://moacdocs-chn.readthedocs.io/zh_CN/latest
 */


const Chain3 = require('chain3');

// need to have a valid account to use for contracts deployment
var baseaddr = "";//keystore address
var basepsd = "";//keystore password

//===============Check the BaseChain connection===============================

// Setup VNODE server to send TX command and the SCS to monitor the AppChain

const vnodeUri = 'http://localhost:8545';// can be change to other urls

// Setup the provider and try to connect
let chain3 = new Chain3();
chain3.setProvider(new chain3.providers.HttpProvider(vnodeUri));

if(!chain3.isConnected()){
    throw new Error('unable to connect to moac vnode at ' + vnodeUri);
}else{
    console.log('connected to VNODE ' + vnodeUri);
    let balance = chain3.mc.getBalance(baseaddr);
    console.log('Check src account balance:' + baseaddr + ' has ' + balance*1e-18 + " MC");
}

//===============Deploy the contract ===============================
// Unlock the account to send the TX
chain3.personal.unlockAccount(baseaddr,basepsd);

var threshold = 3/* var of type int256 here */ ;
var vssbaseContract = chain3.mc.contract([{"constant":true,"inputs":[],"name":"getActiveVSSMemberCount","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"revealed","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"resetVSSGroup","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"}],"name":"slashed","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nodes","type":"address[]"}],"name":"getVSSNodesPubkey","outputs":[{"name":"","type":"bytes32[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"lastSender","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"violator","type":"address"},{"name":"pubShare","type":"bytes"},{"name":"pubSig","type":"bytes"},{"name":"priShare","type":"bytes"},{"name":"priSig","type":"bytes"},{"name":"revealedPri","type":"bytes"}],"name":"reveal","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nodes","type":"address[]"}],"name":"getVSSNodesIndexs","outputs":[{"name":"","type":"int256[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"lastConfigUpload","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"}],"name":"revealedReporter","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"},{"name":"","type":"address"}],"name":"slashingVoters","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"configVersion","type":"int256"}],"name":"vote","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"slowNodeThreshold","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"scs","type":"address"}],"name":"getSCSRole","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"lastNodeChangeConfigVersion","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"}],"name":"revealedViolator","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"index","type":"int256"},{"name":"slash","type":"bool"}],"name":"slashing","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"bytes32"}],"name":"revealedSigMapping","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"}],"name":"slashingRejects","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"int256"}],"name":"slowNodeVotes","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"lastSlashingVoted","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"}],"name":"reveals","outputs":[{"name":"PubShare","type":"bytes"},{"name":"PubSig","type":"bytes"},{"name":"PriShare","type":"bytes"},{"name":"PriSig","type":"bytes"},{"name":"Revealed","type":"bytes"},{"name":"Violator","type":"address"},{"name":"Whistleblower","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"violator","type":"address"}],"name":"reportSlowNode","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"lastNodeChangeBlock","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"getLastSlashVoted","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"address"}],"name":"getPublicShares","outputs":[{"name":"","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"index","type":"int256"}],"name":"getRevealedShare","outputs":[{"components":[{"name":"PubShare","type":"bytes"},{"name":"PubSig","type":"bytes"},{"name":"PriShare","type":"bytes"},{"name":"PriSig","type":"bytes"},{"name":"Revealed","type":"bytes"},{"name":"Violator","type":"address"},{"name":"Whistleblower","type":"address"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"configVersion","type":"int256"}],"name":"isConfigReady","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"node","type":"address"}],"name":"getPrivateShares","outputs":[{"name":"","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"}],"name":"slashingVotes","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"vssThreshold","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"vssNodeMemberships","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"revealIndex","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"},{"name":"","type":"address"}],"name":"voters","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"configVersion","type":"int256"}],"name":"isSlashed","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"GetLastSender","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"lastConfigUploadByBlock","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"vssConfigVersion","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"callerAddr","type":"address"}],"name":"setCaller","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"publicShares","type":"bytes"},{"name":"privateShares","type":"bytes"}],"name":"uploadVSSConfig","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"vssNodeCount","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newThreshold","type":"int256"}],"name":"setSlowNodeThreshold","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"int256"}],"name":"votes","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"GetCaller","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"int256"},{"name":"","type":"address"}],"name":"slowNodeVoted","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"sender","type":"address"}],"name":"deactivateVSS","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"sender","type":"address"}],"name":"activateVSS","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getActiveVSSMemberList","outputs":[{"name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"sender","type":"address"},{"name":"publickey","type":"bytes32"}],"name":"registerVSS","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newThreshold","type":"int256"}],"name":"setThreshold","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"sender","type":"address"}],"name":"unregisterVSS","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"scs","type":"address"}],"name":"getVSSNodeIndex","outputs":[{"name":"","type":"int256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"caller","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"threshold","type":"int256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}]);
var vssbase = vssbaseContract.new(
   threshold,
   {
     from: baseaddr, 
     data: '0x608060405260006019556000601a556000601b556000601c556000601d556000601e556032601f553480156200003457600080fd5b5060405160208062002b38833981018060405262000056919081019062000086565b60195560168054600160a060020a03191633179055620000b2565b60006200007f8251620000af565b9392505050565b6000602082840312156200009957600080fd5b6000620000a7848462000071565b949350505050565b90565b612a7680620000c26000396000f3006080604052600436106102925763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663029471e081146102975780630b927b32146102c257806313af4035146102ef5780631a1efdaf146103115780631c2c6b4d146103265780632512b94714610346578063256fec8814610373578063282c0b8f146103955780632a292dc7146103b55780632a56ce43146103e2578063307f201a146104025780633430cadd146104225780633891c320146104425780633ed4f1161461046257806350859fd914610477578063514cac351461049757806351ed07e4146104ac57806356a09939146104cc57806359495523146104ec5780635e2968531461050c5780636911af651461052c5780637457b3551461054c578063778ada101461056c5780637ce54cc81461059f5780637d0f6c77146105bf5780637e2a1ed3146105d457806380c3fe62146105f45780638b051563146106215780638da5cb5b1461064e57806391e4d7f7146106635780639496db221461068357806394a629be146106a3578063984624ba146106c357806398b72f98146106d857806399ba5a92146106f85780639c0818521461070d5780639d6e8c6c1461072d5780639f1e5f0e1461074d578063b5ef046e14610762578063bbc3d23714610782578063beb92f5514610797578063ca6c8a31146107b7578063cc30a60f146107d7578063cd199420146107ec578063d0bef4ae1461080c578063d89da49c1461082c578063dbccad5414610841578063de79b85614610861578063e4c1de9814610881578063ed0c88ef146108a1578063eefb4227146108c3578063ef0fb558146108e3578063f06dc92d14610903578063fc054aa814610923578063fc9c8d3914610943575b600080fd5b3480156102a357600080fd5b506102ac610958565b6040516102b99190612950565b60405180910390f35b3480156102ce57600080fd5b506102e26102dd36600461255c565b6109a9565b6040516102b991906128a8565b3480156102fb57600080fd5b5061030f61030a36600461235d565b6109be565b005b34801561031d57600080fd5b5061030f6109f7565b34801561033257600080fd5b506102ac61034136600461255c565b610aa3565b34801561035257600080fd5b50610366610361366004612509565b610ab5565b6040516102b99190612886565b34801561037f57600080fd5b50610388610b60565b6040516102b99190612846565b3480156103a157600080fd5b5061030f6103b03660046123bd565b610b6f565b3480156103c157600080fd5b506103d56103d0366004612509565b610e64565b6040516102b99190612897565b3480156103ee57600080fd5b506102ac6103fd36600461235d565b610f08565b34801561040e57600080fd5b5061038861041d36600461255c565b610f1a565b34801561042e57600080fd5b506102e261043d3660046125d9565b610f35565b34801561044e57600080fd5b5061030f61045d36600461255c565b610f55565b34801561046e57600080fd5b506102ac610fd0565b34801561048357600080fd5b506102ac61049236600461235d565b610fd6565b3480156104a357600080fd5b506102ac61107b565b3480156104b857600080fd5b506103886104c736600461255c565b611081565b3480156104d857600080fd5b5061030f6104e7366004612609565b61109c565b3480156104f857600080fd5b506102ac61050736600461255c565b6112af565b34801561051857600080fd5b506102ac61052736600461255c565b6112c1565b34801561053857600080fd5b506102ac610547366004612383565b6112d3565b34801561055857600080fd5b506102ac61056736600461235d565b6112f0565b34801561057857600080fd5b5061058c61058736600461255c565b611302565b6040516102b997969594939291906128c7565b3480156105ab57600080fd5b5061030f6105ba36600461235d565b61160c565b3480156105cb57600080fd5b506102ac61179e565b3480156105e057600080fd5b506102ac6105ef36600461235d565b6117a4565b34801561060057600080fd5b5061061461060f36600461235d565b6117c3565b6040516102b991906128b6565b34801561062d57600080fd5b5061064161063c36600461255c565b61186e565b6040516102b9919061295e565b34801561065a57600080fd5b50610388611ba1565b34801561066f57600080fd5b506102e261067e36600461255c565b611bb0565b34801561068f57600080fd5b5061061461069e36600461235d565b611bd9565b3480156106af57600080fd5b506102ac6106be36600461255c565b611c4d565b3480156106cf57600080fd5b506102ac611c5f565b3480156106e457600080fd5b506102ac6106f336600461235d565b611c65565b34801561070457600080fd5b506102ac611c77565b34801561071957600080fd5b506102e26107283660046125d9565b611c7d565b34801561073957600080fd5b506102e261074836600461255c565b611c9d565b34801561075957600080fd5b50610388611cb0565b34801561076e57600080fd5b506102ac61077d36600461235d565b611cc0565b34801561078e57600080fd5b506102ac611cd2565b3480156107a357600080fd5b5061030f6107b236600461235d565b611cd8565b3480156107c357600080fd5b5061030f6107d236600461257a565b611d11565b3480156107e357600080fd5b506102ac611d9d565b3480156107f857600080fd5b5061030f61080736600461255c565b611da3565b34801561081857600080fd5b506102ac61082736600461255c565b611dbf565b34801561083857600080fd5b50610388611dd1565b34801561084d57600080fd5b506102e261085c3660046124bc565b611de0565b34801561086d57600080fd5b5061030f61087c36600461235d565b611e06565b34801561088d57600080fd5b5061030f61089c36600461235d565b611e7b565b3480156108ad57600080fd5b506108b6611f7f565b6040516102b99190612875565b3480156108cf57600080fd5b5061030f6108de366004612383565b612057565b3480156108ef57600080fd5b5061030f6108fe36600461255c565b6120b4565b34801561090f57600080fd5b5061030f61091e36600461235d565b6120d9565b34801561092f57600080fd5b506102ac61093e36600461235d565b612141565b34801561094f57600080fd5b5061038861215c565b600080805b601a548112156109a3576001600082815260026020908152604080832054600160a060020a031683526003909152902054141561099b576001909101905b60010161095d565b50919050565b600c6020526000908152604090205460ff1681565b601654600160a060020a031633146109d557600080fd5b60168054600160a060020a031916600160a060020a0392909216919091179055565b601654600160a060020a03163314610a0e57600080fd5b6040517f219dc4a0000000000000000000000000000000000000000000000000000000008152600d9063219dc4a090610a4e903090600f9060040161285a565b602060405180830381600087803b158015610a6857600080fd5b505af1158015610a7c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610aa0919081019061253e565b50565b600b6020526000908152604090205481565b60606000606060008451925082604051908082528060200260200182016040528015610aeb578160200160208202803883390190505b509150600090505b8451811015610b58576000808683815181101515610b0d57fe5b90602001906020020151600160a060020a0316600160a060020a03168152602001908152602001600020548282815181101515610b4657fe5b60209081029091010152600101610af3565b509392505050565b601854600160a060020a031681565b33600090815260036020526040812054600114610b8b57600080fd5b84836040518083805190602001908083835b60208310610bbc5780518252601f199092019160209182019101610b9d565b51815160209384036101000a600019018019909216911617905285519190930192850191508083835b60208310610c045780518252601f199092019160209182019101610be5565b51815160209384036101000a600019018019909216911617905260408051929094018290039091206000818152600c909252929020549195505060ff16159250610c5091505057600080fd5b601c80546000908152600d602090815260408083208054600160a060020a0319908116600160a060020a038e1690811790925585548552600e8452828520805433921682179055825160e0810184528c81528085018c90528084018b9052606081018a90526080810189905260a081019290925260c082015293548352600f8252909120825180519192610ce99284929091019061216b565b506020828101518051610d02926001850192019061216b565b5060408201518051610d1e91600284019160209091019061216b565b5060608201518051610d3a91600384019160209091019061216b565b5060808201518051610d5691600484019160209091019061216b565b5060a0820151600582018054600160a060020a0319908116600160a060020a039384161790915560c0909301516006909201805490931691161790556000818152600c60209081526040808320805460ff19166001908117909155601c805460119094529190932082905591019055600d63219dc4a030600f6040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401610e0892919061285a565b602060405180830381600087803b158015610e2257600080fd5b505af1158015610e36573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610e5a919081019061253e565b5050505050505050565b60606000606060008451925082604051908082528060200260200182016040528015610e9a578160200160208202803883390190505b509150600090505b8451811015610b5857600160008683815181101515610ebd57fe5b90602001906020020151600160a060020a0316600160a060020a03168152602001908152602001600020548282815181101515610ef657fe5b60209081029091010152600101610ea2565b60126020526000908152604090205481565b600e60205260009081526040902054600160a060020a031681565b600a60209081526000928352604080842090915290825290205460ff1681565b60013360009081526003602052604090205414610f7157600080fd5b600081815260076020908152604080832033845290915290205460ff1615610f9857600080fd5b60009081526006602090815260408083208054600190810190915560078352818420338552909252909120805460ff19169091179055565b601f5481565b6017546040517f50859fd9000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169081906350859fd990611022908690600401612846565b602060405180830381600087803b15801561103c57600080fd5b505af1158015611050573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506110749190810190612639565b9392505050565b601d5481565b600d60205260009081526040902054600160a060020a031681565b600080600133600090815260036020526040902054146110bb57600080fd5b6000848152600a6020908152604080832033845290915290205460ff16156110e257600080fd5b506000838152600a602090815260408083203384529091529020805460ff19166001908117909155601754600160a060020a03169083151514156111d2576000848152600860205260409020805460010190819055601954136111cd576000848152600d6020526040908190205490517f11f79f7c000000000000000000000000000000000000000000000000000000008152600160a060020a039182169350908216906311f79f7c9061119a908590600401612846565b600060405180830381600087803b1580156111b457600080fd5b505af11580156111c8573d6000803e3d6000fd5b505050505b61127f565b60008481526009602052604090208054600101908190556019541361127f576000848152600e6020526040908190205490517f11f79f7c000000000000000000000000000000000000000000000000000000008152600160a060020a039182169350908216906311f79f7c9061124c908590600401612846565b600060405180830381600087803b15801561126657600080fd5b505af115801561127a573d6000803e3d6000fd5b505050505b336000908152601060205260409020548413156112a9573360009081526010602052604090208490555b50505050565b60116020526000908152604090205481565b60096020526000908152604090205481565b601460209081526000928352604080842090915290825290205481565b60106020526000908152604090205481565b600f6020908152600091825260409182902080548351601f600260001961010060018616150201909316929092049182018490048402810184019094528084529092918391908301828280156113995780601f1061136e57610100808354040283529160200191611399565b820191906000526020600020905b81548152906001019060200180831161137c57829003601f168201915b505050505090806001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156114375780601f1061140c57610100808354040283529160200191611437565b820191906000526020600020905b81548152906001019060200180831161141a57829003601f168201915b50505060028085018054604080516020601f60001961010060018716150201909416959095049283018590048502810185019091528181529596959450909250908301828280156114c95780601f1061149e576101008083540402835291602001916114c9565b820191906000526020600020905b8154815290600101906020018083116114ac57829003601f168201915b5050505060038301805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529495949350908301828280156115595780601f1061152e57610100808354040283529160200191611559565b820191906000526020600020905b81548152906001019060200180831161153c57829003601f168201915b5050505060048301805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181529495949350908301828280156115e95780601f106115be576101008083540402835291602001916115e9565b820191906000526020600020905b8154815290600101906020018083116115cc57829003601f168201915b5050505060058301546006909301549192600160a060020a039081169216905087565b600080806001336000908152600360205260409020541461162c57600080fd5b600160a060020a038416600090815260136020908152604080832054601d54601290935292205443955091935013801561166b5750601f54601e548403135b156112a957600160a060020a0384166000908152601560209081526040808320858452825280832033845290915290205460ff1615156116f857600160a060020a03841660008181526014602090815260408083208684528252808320805460019081019091559383526015825280832086845282528083203384529091529020805460ff191690911790555b601954600160a060020a0385166000908152601460209081526040808320868452909152902054106112a957506017546040517f11f79f7c000000000000000000000000000000000000000000000000000000008152600160a060020a039091169081906311f79f7c90611770908790600401612846565b600060405180830381600087803b15801561178a57600080fd5b505af1158015610e5a573d6000803e3d6000fd5b601e5481565b600160a060020a0381166000908152601060205260409020545b919050565b600160a060020a03811660009081526004602090815260409182902080548351601f60026000196101006001861615020190931692909204918201849004840281018401909452808452606093928301828280156118625780601f1061183757610100808354040283529160200191611862565b820191906000526020600020905b81548152906001019060200180831161184557829003601f168201915b50505050509050919050565b6118766121e9565b6000828152600f602090815260409182902082518154600260018216156101009081026000190190921604601f81018590049094028201810190945260e081018381529093919284928491908401828280156119135780601f106118e857610100808354040283529160200191611913565b820191906000526020600020905b8154815290600101906020018083116118f657829003601f168201915b50505050508152602001600182018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156119b55780601f1061198a576101008083540402835291602001916119b5565b820191906000526020600020905b81548152906001019060200180831161199857829003601f168201915b5050509183525050600282810180546040805160206001841615610100026000190190931694909404601f81018390048302850183019091528084529381019390830182828015611a475780601f10611a1c57610100808354040283529160200191611a47565b820191906000526020600020905b815481529060010190602001808311611a2a57829003601f168201915b505050918352505060038201805460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152938201939291830182828015611adb5780601f10611ab057610100808354040283529160200191611adb565b820191906000526020600020905b815481529060010190602001808311611abe57829003601f168201915b505050918352505060048201805460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152938201939291830182828015611b6f5780601f10611b4457610100808354040283529160200191611b6f565b820191906000526020600020905b815481529060010190602001808311611b5257829003601f168201915b50505091835250506005820154600160a060020a03908116602083015260069092015490911660409091015292915050565b601654600160a060020a031681565b601954600082815260066020526040812054909113611bd1575060016117be565b506000919050565b600160a060020a03811660009081526005602090815260409182902080548351601f60026000196101006001861615020190931692909204918201849004840281018401909452808452606093928301828280156118625780601f1061183757610100808354040283529160200191611862565b60086020526000908152604090205481565b60195481565b60036020526000908152604090205481565b601c5481565b600760209081526000928352604080842090915290825290205460ff1681565b6000908152600b60205260408120541390565b601854600160a060020a03165b90565b60136020526000908152604090205481565b601b5481565b601654600160a060020a03163314611cef57600080fd5b60178054600160a060020a031916600160a060020a0392909216919091179055565b60013360009081526003602052604090205414611d2d57611d99565b3360009081526004602090815260409091208351611d4d9285019061216b565b503360009081526005602090815260409091208251611d6e9284019061216b565b50601b8054600101908190553360009081526012602090815260408083209390935560139052204390555b5050565b601a5481565b601654600160a060020a03163314611dba57600080fd5b601f55565b60066020526000908152604090205481565b601754600160a060020a031690565b601560209081526000938452604080852082529284528284209052825290205460ff1681565b601754600160a060020a0316331480611e295750601654600160a060020a031633145b1515611e3457600080fd5b6001600160a060020a0382166000908152600360205260409020541415610aa057600160a060020a0316600090815260036020526040902060029055601b80546001019055565b601754600160a060020a0316331480611e9e5750601654600160a060020a031633145b1515611ea957600080fd5b60188054600160a060020a031916331790556000600160a060020a0382166000908152600360205260409020541415611f3557601a8054600160a060020a0383166000818152600160208181526040808420869055948352600281528483208054600160a060020a03191685179055855482019095559181526003909352912055601b54601d5543601e555b6002600160a060020a0382166000908152600360205260409020541415610aa05760015b600160a060020a038216600090815260036020526040902055601b54601d5543601e5550565b606060006060600080611f90610958565b935083604051908082528060200260200182016040528015611fbc578160200160208202803883390190505b50925060009150600090505b601a5481121561204e576001600082815260026020908152604080832054600160a060020a0316835260039091529020541415612046576000818152600260205260409020548351600160a060020a039091169084908490811061202857fe5b600160a060020a039092166020928302909101909101526001909101905b600101611fc8565b50909392505050565b601754600160a060020a031633148061207a5750601654600160a060020a031633145b151561208557600080fd5b60188054600160a060020a03191633179055600160a060020a0391909116600090815260208190526040902055565b601654600160a060020a031633146120cb57600080fd5b601955601b80546001019055565b601754600160a060020a03163314806120fc5750601654600160a060020a031633145b151561210757600080fd5b60188054600160a060020a031916331790556001600160a060020a0382166000908152600360205260409020541415610aa0576002611f59565b600160a060020a031660009081526001602052604090205490565b601754600160a060020a031681565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106121ac57805160ff19168380011785556121d9565b828001600101855582156121d9579182015b828111156121d95782518255916020019190600101906121be565b506121e5929150612239565b5090565b60e06040519081016040528060608152602001606081526020016060815260200160608152602001606081526020016000600160a060020a031681526020016000600160a060020a031681525090565b611cbd91905b808211156121e5576000815560010161223f565b600061107482356129e9565b6000601f8201831361227057600080fd5b813561228361227e82612996565b61296f565b915081818352602084019350602081019050838560208402820111156122a857600080fd5b60005b838110156122d457816122be8882612253565b84525060209283019291909101906001016122ab565b5050505092915050565b600061107482356129f5565b600061107482516129f5565b60006110748235611cbd565b6000601f8201831361231357600080fd5b813561232161227e826129b7565b9150808252602083016020830185838301111561233d57600080fd5b6123488382846129fa565b50505092915050565b60006110748251611cbd565b60006020828403121561236f57600080fd5b600061237b8484612253565b949350505050565b6000806040838503121561239657600080fd5b60006123a28585612253565b92505060206123b3858286016122f6565b9150509250929050565b60008060008060008060c087890312156123d657600080fd5b60006123e28989612253565b965050602087013567ffffffffffffffff8111156123ff57600080fd5b61240b89828a01612302565b955050604087013567ffffffffffffffff81111561242857600080fd5b61243489828a01612302565b945050606087013567ffffffffffffffff81111561245157600080fd5b61245d89828a01612302565b935050608087013567ffffffffffffffff81111561247a57600080fd5b61248689828a01612302565b92505060a087013567ffffffffffffffff8111156124a357600080fd5b6124af89828a01612302565b9150509295509295509295565b6000806000606084860312156124d157600080fd5b60006124dd8686612253565b93505060206124ee868287016122f6565b92505060406124ff86828701612253565b9150509250925092565b60006020828403121561251b57600080fd5b813567ffffffffffffffff81111561253257600080fd5b61237b8482850161225f565b60006020828403121561255057600080fd5b600061237b84846122ea565b60006020828403121561256e57600080fd5b600061237b84846122f6565b6000806040838503121561258d57600080fd5b823567ffffffffffffffff8111156125a457600080fd5b6125b085828601612302565b925050602083013567ffffffffffffffff8111156125cd57600080fd5b6123b385828601612302565b600080604083850312156125ec57600080fd5b60006125f885856122f6565b92505060206123b385828601612253565b6000806040838503121561261c57600080fd5b600061262885856122f6565b92505060206123b3858286016122de565b60006020828403121561264b57600080fd5b600061237b8484612351565b612660816129e9565b82525050565b6000612671826129e5565b808452602084019350612683836129df565b60005b828110156126b357612699868351612657565b6126a2826129df565b602096909601959150600101612686565b5093949350505050565b60006126c8826129e5565b8084526020840193506126da836129df565b60005b828110156126b3576126f0868351612760565b6126f9826129df565b6020969096019591506001016126dd565b6000612715826129e5565b808452602084019350612727836129df565b60005b828110156126b35761273d868351612760565b612746826129df565b60209690960195915060010161272a565b612660816129f5565b61266081611cbd565b6000612774826129e5565b808452612788816020860160208601612a06565b61279181612a32565b9093016020019392505050565b805160e0808452600091908401906127b68282612769565b915050602083015184820360208601526127d08282612769565b915050604083015184820360408601526127ea8282612769565b915050606083015184820360608601526128048282612769565b9150506080830151848203608086015261281e8282612769565b91505060a083015161283360a0860182612657565b5060c0830151610b5860c0860182612657565b602081016128548284612657565b92915050565b604081016128688285612657565b6110746020830184612760565b602080825281016110748184612666565b6020808252810161107481846126bd565b60208082528101611074818461270a565b602081016128548284612757565b602080825281016110748184612769565b60e080825281016128d8818a612769565b905081810360208301526128ec8189612769565b905081810360408301526129008188612769565b905081810360608301526129148187612769565b905081810360808301526129288186612769565b905061293760a0830185612657565b61294460c0830184612657565b98975050505050505050565b602081016128548284612760565b60208082528101611074818461279e565b60405181810167ffffffffffffffff8111828210171561298e57600080fd5b604052919050565b600067ffffffffffffffff8211156129ad57600080fd5b5060209081020190565b600067ffffffffffffffff8211156129ce57600080fd5b506020601f91909101601f19160190565b60200190565b5190565b600160a060020a031690565b151590565b82818337506000910152565b60005b83811015612a21578181015183820152602001612a09565b838111156112a95750506000910152565b601f01601f1916905600a265627a7a72305820e6a9d025cfe2e544512893290f99ebd24855865c7dfe21b4ec6cb496c03f4c056c6578706572696d656e74616cf50037', 
     gas: '4700000'
   }
 )


console.log("VSS contract is being deployed at transaction HASH: " + vssbase.transactionHash);
// Lock the account after use
chain3.personal.lockAccount(baseaddr);
